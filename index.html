<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Booth Verification – Minimal</title>

<style>
body {
  font-family: Arial, sans-serif;
  background: #f2f2f2;
  padding: 30px;
}
form {
  background: #fff;
  padding: 20px;
  max-width: 600px;
  margin: auto;
  border-radius: 8px;
}
label {
  font-weight: bold;
}
select, input, button {
  width: 100%;
  padding: 10px;
  margin: 8px 0 16px 0;
}
button {
  background: #4f46e5;
  color: #fff;
  border: none;
  cursor: pointer;
}
#msg {
  margin-top: 15px;
  font-weight: bold;
}
</style>
</head>

<body>

<form id="form">

<label>Organisational District</label>
<select id="district" required>
  <option value="">Select</option>
</select>

<label>Assembly</label>
<select id="assembly" required disabled>
  <option value="">Select</option>
</select>

<label>Mandal</label>
<select id="mandal" required disabled>
  <option value="">Select</option>
</select>

<label>Name</label>
<input id="name" required>

<label>Mobile</label>
<input id="mobile" required>

<button type="submit">Submit</button>

<div id="msg"></div>

</form>

<script>
// ✅ GOOGLE APPS SCRIPT URL (already working)
const SHEET_URL =
"https://script.google.com/a/macros/varaheanalytics.com/s/AKfycbYqA2YCBRJmwrmcfvtdNjrPvJFzD6ELnXDFuEJNGQUAXeAst0dIjMcDJ9URW3qcZsau/exec";

// ✅ DROPDOWN DATA (KEEP SMALL FIRST)
const DATA = {
  "Palakkad East": {
    "Malampuzha": ["Malampuzha", "Puthussery"],
    "Palakkad": ["Palakkad", "Pirayiri"]
  },
  "Palakkad West": {
    "Ottapalam": ["Ottapalam", "Sreekrishnapuram"],
    "Shornur": ["Shornur", "Cherpulassery"]
  }
};

// Populate districts
const districtSel = document.getElementById("district");
const assemblySel = document.getElementById("assembly");
const mandalSel = document.getElementById("mandal");

Object.keys(DATA).forEach(d => {
  districtSel.innerHTML += `<option value="${d}">${d}</option>`;
});

// District → Assembly
districtSel.onchange = () => {
  assemblySel.innerHTML = '<option value="">Select</option>';
  mandalSel.innerHTML = '<option value="">Select</option>';
  mandalSel.disabled = true;

  if (!districtSel.value) {
    assemblySel.disabled = true;
    return;
  }

  Object.keys(DATA[districtSel.value]).forEach(a => {
    assemblySel.innerHTML += `<option value="${a}">${a}</option>`;
  });

  assemblySel.disabled = false;
};

// Assembly → Mandal
assemblySel.onchange = () => {
  mandalSel.innerHTML = '<option value="">Select</option>';

  if (!assemblySel.value) {
    mandalSel.disabled = true;
    return;
  }

  DATA[districtSel.value][assemblySel.value].forEach(m => {
    mandalSel.innerHTML += `<option value="${m}">${m}</option>`;
  });

  mandalSel.disabled = false;
};

// Submit
document.getElementById("form").onsubmit = e => {
  e.preventDefault();

  const payload = {
    district: districtSel.value,
    assembly: assemblySel.value,
    mandal: mandalSel.value,
    name: document.getElementById("name").value,
    mobile: document.getElementById("mobile").value,
    timestamp: new Date().toISOString()
  };

  fetch(SHEET_URL, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  })
  .then(r => r.text())
  .then(t => {
    document.getElementById("msg").innerText = t === "success"
      ? "✅ Submitted successfully"
      : "❌ Error: " + t;
    if (t === "success") e.target.reset();
  })
  .catch(() => {
    document.getElementById("msg").innerText = "❌ Network error";
  });
};
</script>

</body>
</html>





