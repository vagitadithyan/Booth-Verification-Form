<!DOCTYPE html>
<html lang="ml">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡¥¨‡µÇ‡¥§‡µç‡¥§‡µç ‡¥µ‡µÜ‡¥∞‡¥ø‡¥´‡¥ø‡¥ï‡µç‡¥ï‡µá‡¥∑‡µª ‡¥´‡µã‡¥±‡¥Ç</title>

<style>
body{
  font-family:Arial,sans-serif;
  background:linear-gradient(135deg,#667eea,#764ba2);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:20px
}
.form-container{
  background:#fff;
  padding:30px;
  border-radius:12px;
  width:100%;
  max-width:900px
}
h1{text-align:center}
.subtitle{text-align:center;color:#666;margin-bottom:20px}
label{font-weight:bold;display:block;margin-bottom:5px}
input,select{
  width:100%;
  padding:10px;
  margin-bottom:15px;
  border-radius:6px;
  border:1px solid #ccc
}
select:disabled{background:#f0f0f0}
button{
  width:100%;
  padding:12px;
  background:#667eea;
  color:#fff;
  border:none;
  border-radius:8px;
  font-size:16px;
  cursor:pointer
}
button:disabled{background:#aaa}
.success-message,.error-message{
  margin-top:15px;
  padding:12px;
  border-radius:6px;
  display:none
}
.success-message{background:#d4edda;color:#155724}
.error-message{background:#f8d7da;color:#721c24}
.booth-set{
  background:#f5f5f5;
  padding:15px;
  border-radius:8px;
  margin-bottom:15px
}
</style>
</head>

<body>

<div class="form-container">
<h1>‡¥¨‡µÇ‡¥§‡µç‡¥§‡µç ‡¥µ‡µÜ‡¥∞‡¥ø‡¥´‡¥ø‡¥ï‡µç‡¥ï‡µá‡¥∑‡µª ‡¥´‡µã‡¥±‡¥Ç</h1>
<p class="subtitle">‡¥¶‡¥Ø‡¥µ‡¥æ‡¥Ø‡¥ø ‡¥é‡¥≤‡µç‡¥≤‡¥æ ‡¥Ü‡¥µ‡¥∂‡µç‡¥Ø‡¥Æ‡¥æ‡¥Ø ‡¥µ‡¥ø‡¥µ‡¥∞‡¥ô‡µç‡¥ô‡¥≥‡µÅ‡¥Ç ‡¥®‡µΩ‡¥ï‡µÅ‡¥ï</p>

<form id="orgForm">

<label>‡¥∏‡¥Ç‡¥ò‡¥ü‡¥®‡¥æ ‡¥ú‡¥ø‡¥≤‡µç‡¥≤</label>
<select id="orgDistrict" required>
  <option value="">-- ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï --</option>
</select>

<label>‡¥®‡¥ø‡¥Ø‡µã‡¥ú‡¥ï ‡¥Æ‡¥£‡µç‡¥°‡¥≤‡¥Ç</label>
<select id="acName" required disabled>
  <option value="">-- ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï --</option>
</select>

<label>‡¥∏‡¥Ç‡¥ò‡¥ü‡¥®‡¥æ ‡¥Æ‡¥£‡µç‡¥°‡¥≤‡¥Ç</label>
<select id="orgMandal" required disabled>
  <option value="">-- ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï --</option>
</select>

<label>‡¥Æ‡¥£‡µç‡¥°‡¥≤‡¥Ç ‡¥™‡µç‡¥∞‡¥∏‡¥ø‡¥°‡¥®‡µç‡¥±‡µç</label>
<input id="mandalPresident" required>

<label>‡¥Æ‡¥£‡µç‡¥°‡¥≤‡¥Ç ‡¥™‡µç‡¥∞‡¥≠‡¥æ‡¥∞‡¥ø</label>
<input id="mandalPrabhari" required>

<label>‡¥∂‡¥ï‡µç‡¥§‡¥ø‡¥ï‡µá‡¥®‡µç‡¥¶‡µç‡¥∞ ‡¥á‡µª‡¥ö‡¥æ‡µº‡¥ú‡µç</label>
<input id="shaktiKendraIncharge" required>

<label>‡¥Æ‡µä‡¥¨‡µà‡µΩ ‡¥®‡¥Æ‡µç‡¥™‡µº</label>
<input id="phoneNumber" required>

<label>‡¥∏‡¥Ç‡¥ò‡¥ü‡¥®‡¥æ ‡¥ö‡µÅ‡¥Æ‡¥§‡¥≤</label>
<input id="position" required>

<label>‡¥Ü‡¥ï‡µÜ ‡¥¨‡µÇ‡¥§‡µç‡¥§‡µÅ‡¥ï‡µæ</label>
<select id="noOfBooths" required>
  <option value="">-- ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï --</option>
  <option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
</select>

<div id="boothDetailsContainer"></div>

<button id="submitBtn">‡¥´‡µã‡¥Ç ‡¥∏‡¥Æ‡µº‡¥™‡µç‡¥™‡¥ø‡¥ï‡µç‡¥ï‡µÅ‡¥ï</button>

<div class="success-message" id="successMessage"></div>
<div class="error-message" id="errorMessage"></div>

</form>
</div>

<script>
// üî¥ GOOGLE APPS SCRIPT WEB APP URL
const GOOGLE_SHEETS_WEB_APP_URL =
"https://script.google.com/a/macros/varaheanalytics.com/s/AKfycbYqA2YCBRJmwrmcfvtdNjrPvJFzD6ELnXDFuEJNGQUAXeAst0dIjMcDJ9URW3qcZsau/exec";

/* ===== DROPDOWN DATA (SHORTENED SAMPLE ‚Äì YOU CAN EXTEND) ===== */
const DATA = {
  "Thiruvananthapuram South":["Aruvikkara","Kattakada","Kovalam"],
  "Thiruvananthapuram North":["Attingal","Varkala"],
  "Palakkad East":["Malampuzha","Palakkad"],
  "Palakkad West":["Ottapalam","Shornur"]
};

const MANDALS = {
  "Malampuzha":["Malampuzha","Puthussery"],
  "Palakkad":["Palakkad","Pirayiri"],
  "Ottapalam":["Ottapalam","Sreekrishnapuram"],
  "Shornur":["Shornur","Cherpulassery"]
};

// Populate districts
const orgDistrict=document.getElementById("orgDistrict");
Object.keys(DATA).forEach(d=>{
  orgDistrict.innerHTML+=`<option value="${d}">${d}</option>`;
});

// District ‚Üí Assembly
orgDistrict.addEventListener("change",e=>{
  const ac=document.getElementById("acName");
  ac.innerHTML='<option value="">-- ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï --</option>';
  document.getElementById("orgMandal").innerHTML='<option value="">-- ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï --</option>';
  document.getElementById("orgMandal").disabled=true;
  if(!e.target.value){ac.disabled=true;return}
  DATA[e.target.value].forEach(a=>{
    ac.innerHTML+=`<option value="${a}">${a}</option>`;
  });
  ac.disabled=false;
});

// Assembly ‚Üí Mandal
document.getElementById("acName").addEventListener("change",e=>{
  const m=document.getElementById("orgMandal");
  m.innerHTML='<option value="">-- ‡¥§‡¥ø‡¥∞‡¥û‡µç‡¥û‡µÜ‡¥ü‡µÅ‡¥ï‡µç‡¥ï‡µÅ‡¥ï --</option>';
  if(!e.target.value){m.disabled=true;return}
  (MANDALS[e.target.value]||[]).forEach(x=>{
    m.innerHTML+=`<option value="${x}">${x}</option>`;
  });
  m.disabled=false;
});

// Booth fields
document.getElementById("noOfBooths").addEventListener("change",e=>{
  const c=parseInt(e.target.value||0);
  const box=document.getElementById("boothDetailsContainer");
  box.innerHTML="";
  for(let i=1;i<=c;i++){
    box.innerHTML+=`
    <div class="booth-set">
      <label>‡¥¨‡µÇ‡¥§‡µç‡¥§‡µç ‡¥®‡¥Æ‡µç‡¥™‡µº ${i}</label>
      <input id="boothNo_${i}" required>
      <label>‡¥¨‡µÇ‡¥§‡µç‡¥§‡µç ‡¥á‡µª‡¥ö‡¥æ‡µº‡¥ú‡µç ${i}</label>
      <input id="boothIncharge_${i}" required>
      <label>‡¥Æ‡µä‡¥¨‡µà‡µΩ ‡¥®‡¥Æ‡µç‡¥™‡µº ${i}</label>
      <input id="phone_${i}" required>
    </div>`;
  }
});

// Submit
document.getElementById("orgForm").addEventListener("submit",e=>{
e.preventDefault();

const btn=document.getElementById("submitBtn");
const ok=document.getElementById("successMessage");
const err=document.getElementById("errorMessage");

btn.disabled=true; ok.style.display="none"; err.style.display="none";

const booths=[];
const n=parseInt(noOfBooths.value||0);
for(let i=1;i<=n;i++){
  booths.push({
    boothNo:document.getElementById(`boothNo_${i}`).value,
    boothIncharge:document.getElementById(`boothIncharge_${i}`).value,
    phone:document.getElementById(`phone_${i}`).value
  });
}

const payload={
  orgDistrict:orgDistrict.value,
  acName:acName.value,
  orgMandal:orgMandal.value,
  mandalPresident:mandalPresident.value,
  mandalPrabhari:mandalPrabhari.value,
  shaktiKendraIncharge:shaktiKendraIncharge.value,
  phoneNumber:phoneNumber.value,
  position:position.value,
  booths,
  timestamp:new Date().toISOString()
};

fetch(GOOGLE_SHEETS_WEB_APP_URL,{
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify(payload)
})
.then(r=>r.text())
.then(t=>{
  if(t.trim()==="success"){
    ok.innerHTML="‚úÖ ‡¥´‡µã‡¥Ç ‡¥µ‡¥ø‡¥ú‡¥Ø‡¥ï‡¥∞‡¥Æ‡¥æ‡¥Ø‡¥ø ‡¥∏‡¥Æ‡µº‡¥™‡µç‡¥™‡¥ø‡¥ö‡µç‡¥ö‡µÅ";
    ok.style.display="block";
    orgForm.reset();
    boothDetailsContainer.innerHTML="";
  } else throw new Error(t);
})
.catch(()=>{
  err.innerHTML="‚ùå ‡¥°‡¥æ‡¥±‡µç‡¥± Google Sheet-‡µΩ ‡¥∏‡µá‡¥µ‡µç ‡¥ö‡µÜ‡¥Ø‡µç‡¥Ø‡¥æ‡µª ‡¥ï‡¥¥‡¥ø‡¥û‡µç‡¥û‡¥ø‡¥≤‡µç‡¥≤";
  err.style.display="block";
})
.finally(()=>btn.disabled=false);
});
</script>

</body>
</html>




