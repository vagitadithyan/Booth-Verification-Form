<!DOCTYPE html>
<html lang="ml">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ബൂത്ത് വെരിഫിക്കേഷൻ ഫോറം</title>

<style>
body {
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#667eea,#764ba2);
    min-height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
    padding:20px;
}
.form-container {
    background:#fff;
    padding:30px;
    border-radius:12px;
    width:100%;
    max-width:800px;
}
h1{text-align:center}
.subtitle{text-align:center;color:#666;margin-bottom:20px}
label{font-weight:bold;display:block;margin-bottom:5px}
input,select{
    width:100%;
    padding:10px;
    margin-bottom:15px;
    border-radius:6px;
    border:1px solid #ccc;
}
button{
    width:100%;
    padding:12px;
    background:#667eea;
    color:#fff;
    border:none;
    border-radius:8px;
    font-size:16px;
    cursor:pointer;
}
button:disabled{background:#aaa}
.success-message,.error-message{
    margin-top:15px;
    padding:12px;
    border-radius:6px;
    display:none;
}
.success-message{background:#d4edda;color:#155724}
.error-message{background:#f8d7da;color:#721c24}
.booth-set{
    background:#f5f5f5;
    padding:15px;
    border-radius:8px;
    margin-bottom:15px;
}
</style>
</head>

<body>

<div class="form-container">
<h1>ബൂത്ത് വെരിഫിക്കേഷൻ ഫോറം</h1>
<p class="subtitle">ദയവായി എല്ലാ ആവശ്യമായ വിവരങ്ങളും നൽകുക</p>

<form id="orgForm">

<label>സംഘടനാ ജില്ല</label>
<input id="orgDistrict" required>

<label>നിയോജക മണ്ഡലം</label>
<input id="acName" required>

<label>സംഘടനാ മണ്ഡലം</label>
<input id="orgMandal" required>

<label>മണ്ഡലം പ്രസിഡന്റ്</label>
<input id="mandalPresident" required>

<label>മണ്ഡലം പ്രഭാരി</label>
<input id="mandalPrabhari" required>

<label>ശക്തികേന്ദ്ര ഇൻചാർജ്</label>
<input id="shaktiKendraIncharge" required>

<label>മൊബൈൽ നമ്പർ</label>
<input id="phoneNumber" required>

<label>സംഘടനാ ചുമതല</label>
<input id="position" required>

<label>ആകെ ബൂത്തുകൾ</label>
<select id="noOfBooths" required>
<option value="">-- തിരഞ്ഞെടുക്കുക --</option>
<option>1</option><option>2</option><option>3</option><option>4</option><option>5</option>
</select>

<div id="boothDetailsContainer"></div>

<button id="submitBtn">ഫോം സമർപ്പിക്കുക</button>

<div class="success-message" id="successMessage"></div>
<div class="error-message" id="errorMessage"></div>

</form>
</div>

<script>
const GOOGLE_SHEETS_WEB_APP_URL =
"https://script.google.com/a/macros/varaheanalytics.com/s/AKfycbYqA2YCBRJmwrmcfvtdNjrPvJFzD6ELnXDFuEJNGQUAXeAst0dIjMcDJ9URW3qcZsau/exec";

/* Booth fields */
document.getElementById("noOfBooths").addEventListener("change", e=>{
    const c=parseInt(e.target.value||0);
    const box=document.getElementById("boothDetailsContainer");
    box.innerHTML="";
    for(let i=1;i<=c;i++){
        box.innerHTML+=`
        <div class="booth-set">
            <label>ബൂത്ത് നമ്പർ ${i}</label>
            <input id="boothNo_${i}" required>
            <label>ബൂത്ത് ഇൻചാർജ് ${i}</label>
            <input id="boothIncharge_${i}" required>
            <label>മൊബൈൽ നമ്പർ ${i}</label>
            <input id="phone_${i}" required>
        </div>`;
    }
});

/* Submit */
document.getElementById("orgForm").addEventListener("submit",e=>{
e.preventDefault();

const btn=document.getElementById("submitBtn");
const ok=document.getElementById("successMessage");
const err=document.getElementById("errorMessage");

ok.style.display="none";
err.style.display="none";
btn.disabled=true;

const booths=[];
const n=parseInt(document.getElementById("noOfBooths").value||0);
for(let i=1;i<=n;i++){
    booths.push({
        boothNo:document.getElementById(`boothNo_${i}`).value,
        boothIncharge:document.getElementById(`boothIncharge_${i}`).value,
        phone:document.getElementById(`phone_${i}`).value
    });
}

const payload={
    orgDistrict:document.getElementById("orgDistrict").value,
    acName:document.getElementById("acName").value,
    orgMandal:document.getElementById("orgMandal").value,
    mandalPresident:document.getElementById("mandalPresident").value,
    mandalPrabhari:document.getElementById("mandalPrabhari").value,
    shaktiKendraIncharge:document.getElementById("shaktiKendraIncharge").value,
    phoneNumber:document.getElementById("phoneNumber").value,
    position:document.getElementById("position").value,
    booths,
    timestamp:new Date().toISOString()
};

fetch(GOOGLE_SHEETS_WEB_APP_URL,{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify(payload)
})
.then(r=>r.text())
.then(t=>{
    if(t.trim()==="success"){
        ok.innerHTML="✅ ഫോം വിജയകരമായി സമർപ്പിച്ചു";
        ok.style.display="block";
        document.getElementById("orgForm").reset();
        document.getElementById("boothDetailsContainer").innerHTML="";
    } else {
        throw new Error(t);
    }
})
.catch(()=>{
    err.innerHTML="❌ ഡാറ്റ Google Sheet-ൽ സേവ് ചെയ്യാൻ കഴിഞ്ഞില്ല";
    err.style.display="block";
})
.finally(()=>btn.disabled=false);

});
</script>

</body>
</html>



